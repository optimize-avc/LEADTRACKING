# Firebase App Hosting Configuration
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
    cpu: 1
    memoryMiB: 1024
    minInstances: 0
    maxInstances: 10
    concurrency: 80

# ============================================================================
# SECRETS SETUP GUIDE
# ============================================================================
# Before deploying, add these secrets to Cloud Secret Manager:
#
# REQUIRED for core functionality:
#   firebase apphosting:secrets:set GOOGLE_CLIENT_SECRET    # Google OAuth
#
# REQUIRED for payments (Stripe):
#   firebase apphosting:secrets:set STRIPE_SECRET_KEY       # sk_live_xxx or sk_test_xxx
#   firebase apphosting:secrets:set STRIPE_WEBHOOK_SECRET   # whsec_xxx
#   firebase apphosting:secrets:set STRIPE_PRICE_ID_PRO     # price_xxx
#   firebase apphosting:secrets:set STRIPE_PRICE_ID_VENTURE # price_xxx
#
# REQUIRED for SMS/Voice (Twilio):
#   firebase apphosting:secrets:set TWILIO_ACCOUNT_SID      # ACxxx
#   firebase apphosting:secrets:set TWILIO_AUTH_TOKEN       # auth token
#
# REQUIRED for email (SendGrid):
#   firebase apphosting:secrets:set SENDGRID_API_KEY        # SG.xxx
#
# REQUIRED for Discord bot:
#   firebase apphosting:secrets:set DISCORD_BOT_TOKEN       # Bot token from Discord Dev Portal
#   firebase apphosting:secrets:set DISCORD_CLIENT_SECRET   # OAuth client secret
#
# REQUIRED for AI features:
#   firebase apphosting:secrets:set GOOGLE_AI_API_KEY       # Gemini API key
#   firebase apphosting:secrets:set GOOGLE_PLACES_API_KEY   # Places API key
#
# To verify secrets are set:
#   firebase apphosting:secrets:list
# ============================================================================

# Environment Variables using the correct 'env' format
env:
    # Firebase Public Config
    - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      value: antigrav-tracking-final
      availability:
          - BUILD
          - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_API_KEY
      value: AIzaSyDK6-V94VNzc5pTCgXzKvY9UA00Z0oCSRc
      availability:
          - BUILD
          - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      value: antigrav-tracking-final.firebaseapp.com
      availability:
          - BUILD
          - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      value: antigrav-tracking-final.firebasestorage.app
      availability:
          - BUILD
          - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      value: '813307578320'
      availability:
          - BUILD
          - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_APP_ID
      value: 1:813307578320:web:5932e5a25b74de48c91bd5
      availability:
          - BUILD
          - RUNTIME
    - variable: NEXT_PUBLIC_APP_URL
      value: https://prod-lead-tracker--antigrav-tracking-final.us-central1.hosted.app
      availability:
          - BUILD
          - RUNTIME

    # Sentry Error Tracking (public DSN is safe to expose)
    - variable: NEXT_PUBLIC_SENTRY_DSN
      value: 'https://2d2c3e60451058c9f5d0ef380f7e71bd@o4510179283042305.ingest.us.sentry.io/4510796116066304'
      availability:
          - BUILD
          - RUNTIME

    # Google OAuth (client ID is public)
    - variable: GOOGLE_CLIENT_ID
      value: 343608443426-qd6f4kkvvkfbeb71ncuug9ldse4ob7cn.apps.googleusercontent.com
      availability:
          - RUNTIME

    # Stripe (publishable key is public)
    - variable: NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
      value: pk_test_your_publishable_key_here
      availability:
          - BUILD
          - RUNTIME

    # Twilio Config (public values)
    - variable: TWILIO_PHONE_NUMBER
      value: '+17086947326'
      availability:
          - RUNTIME
    - variable: TWILIO_TWIML_APP_SID
      value: APxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
      availability:
          - RUNTIME

    # ============================================
    # SECRETS (stored in Cloud Secret Manager)
    # ============================================
    # Run `firebase apphosting:secrets:set <SECRET_NAME>` to add each secret
    # See header comments for full setup guide

    # Stripe Secrets (DISABLED - enable after running firebase apphosting:secrets:set)
    # - variable: STRIPE_SECRET_KEY
    #   secret: STRIPE_SECRET_KEY
    #   availability:
    #       - RUNTIME
    # - variable: STRIPE_WEBHOOK_SECRET
    #   secret: STRIPE_WEBHOOK_SECRET
    #   availability:
    #       - RUNTIME
    # - variable: STRIPE_PRICE_ID_PRO
    #   secret: STRIPE_PRICE_ID_PRO
    #   availability:
    #       - RUNTIME
    # - variable: STRIPE_PRICE_ID_VENTURE
    #   secret: STRIPE_PRICE_ID_VENTURE
    #   availability:
    #       - RUNTIME

    # Twilio Secrets (DISABLED - enable after adding to Secret Manager)
    # - variable: TWILIO_ACCOUNT_SID
    #   secret: TWILIO_ACCOUNT_SID
    #   availability:
    #       - RUNTIME
    # - variable: TWILIO_AUTH_TOKEN
    #   secret: TWILIO_AUTH_TOKEN
    #   availability:
    #       - RUNTIME

    # Google OAuth Secret (DISABLED - enable after adding to Secret Manager)
    # - variable: GOOGLE_CLIENT_SECRET
    #   secret: GOOGLE_CLIENT_SECRET
    #   availability:
    #       - RUNTIME
    
    # Google AI API Key (ENABLED - required for Deep Audit)
    - variable: GOOGLE_AI_API_KEY
      secret: GOOGLE_AI_API_KEY
      availability:
          - RUNTIME
    # Alias for backward compatibility
    - variable: GEMINI_API_KEY
      secret: GOOGLE_AI_API_KEY
      availability:
          - RUNTIME

    # Google Places API - For AI Lead Discovery
    - variable: GOOGLE_PLACES_API_KEY
      secret: GOOGLE_PLACES_API_KEY
      availability:
          - RUNTIME

    # ============================================
    # AI API Keys (for Lead Scoring & Analysis)
    # ============================================
    # Options (pick one, Gemini preferred for cost):
    #
    # Option 1: Google AI / Gemini (RECOMMENDED - cheapest)
    # firebase apphosting:secrets:set GOOGLE_AI_API_KEY
    # - variable: GOOGLE_AI_API_KEY
    #   secret: GOOGLE_AI_API_KEY
    #   availability:
    #       - RUNTIME
    #
    # Option 2: OpenAI
    # firebase apphosting:secrets:set OPENAI_API_KEY
    # - variable: OPENAI_API_KEY
    #   secret: OPENAI_API_KEY
    #   availability:
    #       - RUNTIME
    #
    # Cost estimates per sweep (10 leads):
    # - Gemini Flash (scoring): ~$0.01
    # - Gemini Pro (analysis): ~$0.05-0.10
    # - GPT-4o-mini (scoring): ~$0.01
    # - GPT-4o (analysis): ~$0.10-0.20
    # Total: $0.05-0.30 per sweep

    # SendGrid (DISABLED - enable after adding to Secret Manager)
    # - variable: SENDGRID_API_KEY
    #   secret: SENDGRID_API_KEY
    #   availability:
    #       - RUNTIME

    # Discord OAuth2 (Bot Studio)
    - variable: NEXT_PUBLIC_DISCORD_CLIENT_ID
      value: '1464013717522874419'
      availability:
          - BUILD
          - RUNTIME
    - variable: DISCORD_CLIENT_ID
      value: '1464013717522874419'
      availability:
          - RUNTIME
    # Discord Bot Token (DISABLED - enable after adding to Secret Manager)
    # - variable: DISCORD_BOT_TOKEN
    #   secret: DISCORD_BOT_TOKEN
    #   availability:
    #       - RUNTIME
    # Discord secret (DISABLED - enable after adding to Secret Manager)
    # - variable: DISCORD_CLIENT_SECRET
    #   secret: DISCORD_CLIENT_SECRET
    #   availability:
    #       - RUNTIME
    - variable: DISCORD_REDIRECT_URI
      value: https://prod-lead-tracker--antigrav-tracking-final.us-central1.hosted.app/api/discord/callback
      availability:
          - RUNTIME
